<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Neon Flappy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      .glow {
        box-shadow: 0 0 18px rgba(34, 211, 238, 0.7), 0 0 36px rgba(217, 70, 239, 0.35);
      }
      .panel {
        background: rgba(255, 255, 255, 0.06);
        border: 1px solid rgba(255, 255, 255, 0.12);
        backdrop-filter: blur(16px);
      }
    </style>
  </head>
  <body class="min-h-screen bg-slate-950 text-slate-100">
    <div class="fixed inset-0 pointer-events-none">
      <div class="absolute -top-24 -left-24 h-80 w-80 rounded-full bg-cyan-500/30 blur-[120px]"></div>
      <div class="absolute top-32 right-0 h-96 w-96 rounded-full bg-fuchsia-500/25 blur-[140px]"></div>
      <div class="absolute bottom-0 left-1/3 h-72 w-72 rounded-full bg-emerald-500/20 blur-[120px]"></div>
    </div>

    <main class="relative z-10 flex flex-col items-center px-6 py-8 gap-5">
      <header class="text-center">
        <h1 class="text-3xl md:text-4xl font-semibold tracking-wide text-cyan-200">Neon Flappy</h1>
        <p class="text-slate-300 mt-2">Tap / click / press Space to fly.</p>
      </header>

      <section class="panel glow rounded-2xl p-4 w-full max-w-3xl">
        <div class="flex flex-wrap items-center justify-between gap-4 text-sm">
          <div class="flex items-center gap-3">
            <div class="px-3 py-2 rounded-lg bg-white/10">Score: <span id="score" class="text-cyan-200 font-semibold">0</span></div>
            <div class="px-3 py-2 rounded-lg bg-white/10">Best: <span id="best" class="text-fuchsia-200 font-semibold">0</span></div>
          </div>
          <div class="flex items-center gap-2">
            <button id="startBtn" class="px-4 py-2 rounded-lg bg-cyan-500/80 text-white hover:bg-cyan-400/80">Start</button>
            <button id="resetBtn" class="px-4 py-2 rounded-lg border border-white/10 text-slate-200 hover:bg-white/5">Reset</button>
          </div>
        </div>
      </section>

      <section class="panel rounded-2xl p-4 w-full max-w-3xl">
        <canvas id="game" width="720" height="420" class="w-full rounded-xl border border-white/10 bg-gradient-to-br from-slate-900/80 to-slate-800/60"></canvas>
      </section>

      <section class="panel rounded-2xl p-4 w-full max-w-3xl text-sm text-slate-300">
        <h3 class="font-semibold text-slate-100">How to play</h3>
        <ul class="list-disc ml-5 mt-2 space-y-1">
          <li>Click or press Space to flap upward.</li>
          <li>Pass through the glowing gaps to score.</li>
          <li>Crash and it’s game over — beat your best.</li>
        </ul>
      </section>
    </main>

    <script>
      const canvas = document.getElementById('game');
      const ctx = canvas.getContext('2d');
      const scoreEl = document.getElementById('score');
      const bestEl = document.getElementById('best');
      const startBtn = document.getElementById('startBtn');
      const resetBtn = document.getElementById('resetBtn');

      const bestScore = Number(localStorage.getItem('neon-flappy-best') || 0);
      bestEl.textContent = bestScore;

      let running = false;
      let score = 0;
      let frame = 0;

      const bird = {
        x: 120,
        y: 200,
        r: 16,
        vy: 0,
        gravity: 0.45,
        lift: -7.5,
      };

      const pipes = [];
      const pipeGap = 140;
      const pipeWidth = 60;
      const pipeSpeed = 2.6;

      function resetGame() {
        running = false;
        score = 0;
        frame = 0;
        bird.y = 200;
        bird.vy = 0;
        pipes.length = 0;
        scoreEl.textContent = score;
        draw();
      }

      function spawnPipe() {
        const gapTop = Math.random() * (canvas.height - pipeGap - 80) + 40;
        pipes.push({ x: canvas.width + 20, gapTop, scored: false });
      }

      function flap() {
        if (!running) return;
        bird.vy = bird.lift;
      }

      function collide(pipe) {
        const withinX = bird.x + bird.r > pipe.x && bird.x - bird.r < pipe.x + pipeWidth;
        if (!withinX) return false;
        const hitTop = bird.y - bird.r < pipe.gapTop;
        const hitBottom = bird.y + bird.r > pipe.gapTop + pipeGap;
        return hitTop || hitBottom;
      }

      function update() {
        if (!running) return;
        frame++;
        bird.vy += bird.gravity;
        bird.y += bird.vy;

        if (frame % 90 === 0) spawnPipe();

        for (const pipe of pipes) {
          pipe.x -= pipeSpeed;
          if (!pipe.scored && pipe.x + pipeWidth < bird.x) {
            pipe.scored = true;
            score++;
            scoreEl.textContent = score;
          }
        }

        if (pipes.length && pipes[0].x + pipeWidth < -20) pipes.shift();

        if (bird.y - bird.r < 0 || bird.y + bird.r > canvas.height) {
          endGame();
        }

        for (const pipe of pipes) {
          if (collide(pipe)) {
            endGame();
            break;
          }
        }
      }

      function endGame() {
        running = false;
        if (score > bestScore) {
          localStorage.setItem('neon-flappy-best', score);
          bestEl.textContent = score;
        }
      }

      function drawBackground() {
        ctx.fillStyle = '#0b1020';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
        gradient.addColorStop(0, 'rgba(34,211,238,0.15)');
        gradient.addColorStop(1, 'rgba(217,70,239,0.08)');
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
      }

      function drawPipes() {
        for (const pipe of pipes) {
          ctx.fillStyle = 'rgba(34,211,238,0.7)';
          ctx.shadowColor = 'rgba(34,211,238,0.6)';
          ctx.shadowBlur = 14;
          ctx.fillRect(pipe.x, 0, pipeWidth, pipe.gapTop);
          ctx.fillRect(pipe.x, pipe.gapTop + pipeGap, pipeWidth, canvas.height);
        }
        ctx.shadowBlur = 0;
      }

      function drawBird() {
        ctx.beginPath();
        ctx.fillStyle = 'rgba(236,72,153,0.9)';
        ctx.shadowColor = 'rgba(236,72,153,0.7)';
        ctx.shadowBlur = 16;
        ctx.arc(bird.x, bird.y, bird.r, 0, Math.PI * 2);
        ctx.fill();
        ctx.shadowBlur = 0;
      }

      function drawText() {
        if (running) return;
        ctx.fillStyle = 'rgba(255,255,255,0.8)';
        ctx.font = '20px Inter, sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('Press Start or Space to play', canvas.width / 2, canvas.height / 2);
      }

      function draw() {
        drawBackground();
        drawPipes();
        drawBird();
        drawText();
      }

      function loop() {
        update();
        draw();
        requestAnimationFrame(loop);
      }

      startBtn.addEventListener('click', () => {
        if (!running) {
          running = true;
        }
      });

      resetBtn.addEventListener('click', resetGame);

      window.addEventListener('keydown', (e) => {
        if (e.code === 'Space') {
          if (!running) running = true;
          flap();
        }
      });

      canvas.addEventListener('click', () => {
        if (!running) running = true;
        flap();
      });

      resetGame();
      loop();
    </script>
  </body>
</html>
